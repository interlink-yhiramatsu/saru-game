saru.Main=function(){var a=saru.Const.MAX_ENEMY;var i=saru.Const.MAX_HERO_TAMA;var o=false;var l=0;var u;var d=saru.Const.GAME_TIME;var h=d;var p;var g;
var C=[];var f=[];var v;n();var y={container:v,start:j,end:c,getScore:e};function n(){v=new createjs.Container();v.visible=false;p=saru.Hero();p.mc.addEventListener(saru.Const.HERO_HIT_ANIM_END,q);
var J=new saru_assets.BG();v.addChild(J);for(var G=0;G<a;G++){var E=saru.Enemy(p.mc);v.addChild(E.mc);C.push(E);}for(var F=0;F<i;F++){var H=saru.HeroTama();
v.addChild(H.mc);f.push(H);}v.addChild(p.mc);var D=saru.Utils.kukei(700,6,"#006B52",0);v.addChild(D);var I=new createjs.Container();g=saru.Utils.kukei(700,6,"#B9CC20",0);
v.addChild(I);I.addChild(g);D.y=444;I.y=444;}function j(){o=false;l=0;u=setInterval(x,saru.Const.ENEMY_PRODUCE_TIME);h=d;g.scaleX=1;p.reset(0,saru.Const.HEIGHT/2);
for(var F=0;F<a;F++){var D=C[F];D.sleep();}for(var E=0;E<i;E++){var G=f[E];G.sleep();}createjs.Ticker.addEventListener("tick",A);if(saru.Const.isSP){v.stage.addEventListener("pressmove",t);
}else{v.stage.addEventListener("stagemousedown",t);v.stage.addEventListener("stagemouseup",z);}v.visible=true;}function t(D){k(p.mc.x,p.mc.y);o=true;}function z(D){o=false;
}function k(E,D){for(var F=0;F<i;F++){var G=f[F];if(G.getIsReady()==true){if(saru.Utils.getRandom(2)==0){G.activate(E,D,0);}else{G.activate(E,D,1);}break;
}}}function b(){for(var F=0;F<a;F++){var D=C[F];if(D.getIsReady()==true){var E=saru.Utils.getRandom(6);if(E==0){D.spawn(-10,saru.Utils.getRandom(saru.Const.HEIGHT),saru.Const.TYPE_DEF);
}else{if(E==1){D.spawn(saru.Const.WIDTH+10,saru.Utils.getRandom(saru.Const.HEIGHT),saru.Const.TYPE_KAMIKAZE,p.mc.x,p.mc.y);}else{if(E==2){D.spawn(-10,saru.Utils.getRandom(saru.Const.HEIGHT),saru.Const.TYPE_MISSILE);
}else{if(E==3){D.spawn(saru.Utils.getRandom(saru.Const.WIDTH),saru.Const.HEIGHT+10,saru.Const.TYPE_SHOURYU);}else{if(E==4){D.spawn(saru.Utils.getRandom(saru.Const.WIDTH),-10,saru.Const.TYPE_FUWAFUWA_X,p.mc.x,p.mc.y);
}else{if(E==5){D.spawn(saru.Const.WIDTH+10,saru.Utils.getRandom(saru.Const.HEIGHT),saru.Const.TYPE_FUWAFUWA_X,p.mc.x,p.mc.y);}}}}}}break;}}}function x(D){if(h>d*0.8){b();
}else{if(h>d*0.6){b();b();}else{if(h>d*0.4){b();b();b();}else{if(h>d*0.2){b();b();b();b();}else{b();b();b();b();b();}}}}}function A(H){if(o==true&&(h%3==0)){k(p.mc.x,p.mc.y);
}h--;if(h<=0){w();}else{g.scaleX=(h/d);}p.step();f.forEach(s);C.forEach(s);f.forEach(r);C.forEach(r);var D;var G;for(var F=0;F<a;F++){D=C[F];if(D.getIsActive()==true&&p.circleHitTest(D.gameItemStatus)){if(!saru.Const.DEBUG){m();
}}for(var E=0;E<i;E++){G=f[E];if(G.circleHitTest(D.gameItemStatus)){if(D.getIsActive()==true&&G.getIsActive()==true){l++;D.hit();G.hit();}}}}}function s(E,D,F){E.step();
}function r(E,D,F){if(E.outTest(saru.Const.WIDTH,saru.Const.HEIGHT)){E.sleep();}}function w(){B();v.dispatchEvent(new Event(saru.Const.MAIN_END));}function m(){p.hit();
B();}function B(){clearInterval(u);createjs.Ticker.removeEventListener("tick",A);if(saru.Const.isSP){v.stage.removeEventListener("pressmove",t);}else{v.stage.removeEventListener("stagemousedown",t);
v.stage.removeEventListener("stagemouseup",z);}}function q(D){v.dispatchEvent(new Event(saru.Const.MAIN_END));}function c(){}function e(){return l;}return y;
};