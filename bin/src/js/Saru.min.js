saru.Saru=function(){var i;var b;var g;var c;var n=0;var k;var j;function m(p){j=document.getElementById(p);saru_images=saru_images||{};ss=ss||{};var o=new createjs.LoadQueue(false);
o.addEventListener("fileload",a);o.addEventListener("complete",d);o.loadFile({src:"src/images/saru_assets_atlas_.json",type:"spritesheet",id:"saru_assets_atlas_"},true);
o.loadManifest(saru_assets.properties.manifest);}function a(o){if(o.item.type=="image"){saru_images[o.item.id]=o.result;}}function d(p){var o=p.target;
ss.saru_assets_atlas_=o.getResult("saru_assets_atlas_");exportRoot=new saru_assets.saruAssets();k=new createjs.Stage(j);if(saru.Const.isSP){createjs.Touch.enable(k);
}createjs.Ticker.timingMode=createjs.Ticker.RAF_SYNC;createjs.Ticker.setFPS(30);f();}function h(){var o=window.innerWidth;var r=window.innerHeight;var p=o/r;
var q=saru.Const.WIDTH/saru.Const.HEIGHT;if(p>=q){$("canvas").css({width:((r*q)+"px"),height:(r+"px"),left:((o-(r*q))/2+"px"),top:0});}else{$("canvas").css({width:(o+"px"),height:((o/q)+"px"),left:0,top:((r-(o/q))/2+"px")});
}}function f(){if(saru.Const.isSP){$(window).resize(h);h();}i=saru.Pre();k.addChild(i.container);i.container.addEventListener(saru.Const.PRE_START_BT_CLICK,e);
b=saru.Main();k.addChild(b.container);b.container.addEventListener(saru.Const.MAIN_END,e);g=saru.Result();k.addChild(g.container);g.container.addEventListener(saru.Const.RESULT_REPLAY,e);
c=new saru_assets.Maku();k.addChild(c);c.addEventListener(saru.Const.MAKU_CHANGE,l);createjs.Ticker.addEventListener("tick",k);i.start();}function e(o){c.gotoAndPlay("lplay");
}function l(o){if(n==0){i.end();b.start();n=1;}else{if(n==1){b.end();g.start();g.showScore(b.getScore());n=2;}else{if(n==2){b.start();g.end();n=1;}}}}return{init:m};
};